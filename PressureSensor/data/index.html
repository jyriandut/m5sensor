<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light">
    
    <link rel="stylesheet" href="pico.lime.min.css">
    <script src="alpine.min.js" defer></script>
    <script src="app.js"></script>
    <title>M5 Atom: Pressure sensor interface</title>
  </head>
  <body>
    <main class="container" x-data="ledData">
      <header>
        <h1 x-data="{ message: 'M5 Configurator' }" x-text="message"></h1>
      </header>
      <article>
        <header>
          <h3>Select new color</h3>
        </header>
        <div class="grid">
          <label>
            <input type="color" x-model="color" />
          </label>
          <button
            @click="applyColor"
            :aria-busy="busy"
            :disabled="busy"
            >Apply color</button>
        </div>
        <p x-show="err" style="color:#b00020" x-text="err"></p>
        <p x-show="ok" style="color:#1b5e20" x-text="ok"></p>
      </article>
      <hr />
      <article x-data="wifiSettings" x-cloak>
        <header>
          <h3> WiFi Settings (stored to flash)</h3>
        </header>
        <form @submit.prevent="saveWifiSettings">
          <fieldset :aria-busy="wifiBusy">
            <label>
              WiFi SSID:
              <input
                x-model="credentials.ssid"
                type="text"
                required
                />
            </label>
            <label x-data="{ show: false }">
              Password:
              <input :type="show ? 'text' : 'password'" x-model="credentials.pass" required />
              <button type="button" @click="show = !show" aria-label="Toggle password visibility">
                <span x-text="show ? 'Hide password' : 'Show password'"></span>
              </button>
            </label>
            
            <label>
              Authentication token (will be added later):
              <textarea
                x-model="credentials.token"
                type="textfield"
                name="token"
                placeholder=""
                ></textarea>
            </label>
          </fieldset>
          <input
            :disabled="wifiBusy"
            type="submit"
            value="Save"
            />
        </form>
      </article>
    </main>
  </body>
</html>

